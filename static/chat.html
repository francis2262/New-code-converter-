<!doctype html>
<html>
<head><meta charset="utf-8"><title>Chat Room</title></head>
<body>
  <h1>Live Chat Room</h1>
  <div id="box" style="border:1px solid #ccc;height:300px;overflow:auto;padding:8px"></div>
  <input id="name" placeholder="Your name" style="width:30%">
  <input id="msg" placeholder="Type message" style="width:50%">
  <button id="send">Send</button>

  <script>
    const box = document.getElementById('box');
    const nameInput = document.getElementById('name');
    const msgInput = document.getElementById('msg');
    const sendBtn = document.getElementById('send');

    const protocol = location.protocol === 'https:' ? 'wss' : 'ws';
    const ws = new WebSocket(protocol + '://' + window.location.host + '/ws/chat');

    ws.onmessage = (ev) => {
      const p = document.createElement('div');
      p.textContent = ev.data;
      box.appendChild(p);
      box.scrollTop = box.scrollHeight;
    };

    sendBtn.onclick = () => {
      const name = nameInput.value.trim() || 'Anon';
      const text = msgInput.value.trim();
      if(!text) return;
      ws.send(name + ': ' + text);
      msgInput.value = '';
    };
  </script>
</body>
</html>
